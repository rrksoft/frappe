sudo apt update
sudo apt upgrade -y

sudo adduser shaibal
sudo usermod -aG sudo shaibal
su shaibal 
cd /home/shaibal/

sudo apt install software-properties-common git curl whiptail -y


sudo apt -qq install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev \
        libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget libbz2-dev -y && \
    wget https://www.python.org/ftp/python/3.10.11/Python-3.10.11.tgz && \
    tar -xf Python-3.10.11.tgz && \
    cd Python-3.10.11 && \
    ./configure --prefix=/usr/local --enable-optimizations --enable-shared LDFLAGS="-Wl,-rpath /usr/local/lib" && \
    make -j "$(nproc)" && \
    sudo make altinstall && \
    cd .. && \
    sudo rm -rf Python-3.10.11 && \
    sudo rm Python-3.10.11.tgz && \
    pip3.10 install --user --upgrade pip 
 
sudo apt install git python3-dev python3-setuptools python3-venv python3-pip redis-server -y

sudo apt install fontconfig libxrender1 xfonts-75dpi xfonts-base -y

wget https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-3/wkhtmltox_0.12.6.1-3.jammy_amd64.deb
sudo apt-get install libjpeg-turbo8
sudo dpkg -i wkhtmltox_0.12.6.1-3.jammy_amd64.deb
sudo cp /usr/local/bin/wkhtmlto* /usr/bin/ 
sudo chmod a+x /usr/bin/wk*
sudo rm  wkhtmltox_0.12.6.1-3.jammy_amd64.deb
sudo apt --fix-broken install -y
sudo apt install fontconfig xvfb libfontconfig xfonts-base xfonts-75dpi libxrender1 -y


sudo apt install mariadb-server mariadb-client -y
sudo apt install pkg-config default-libmysqlclient-dev -y

sudo mysql -e "ALTER USER 'root'@'localhost' IDENTIFIED BY '$sqlpasswrd';"
    sudo mysql -u root -p"$sqlpasswrd" -e "ALTER USER 'root'@'localhost' IDENTIFIED BY '$sqlpasswrd';"
    sudo mysql -u root -p"$sqlpasswrd" -e "DELETE FROM mysql.user WHERE User='';"
    sudo mysql -u root -p"$sqlpasswrd" -e "DROP DATABASE IF EXISTS test; DELETE FROM mysql.db WHERE Db='test' OR Db='test\\_%';"
    sudo mysql -u root -p"$sqlpasswrd" -e "FLUSH PRIVILEGES;"


sudo mariadb-secure-installation



  sudo bash -c 'cat << EOF >> /etc/mysql/my.cnf
[mysqld]
character-set-client-handshake = FALSE
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[mysql]
default-character-set = utf8mb4
EOF'

    sudo service mysql restart

sudo apt install curl

curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash

source ~/.profile

nvm install 18

sudo apt-get install npm


sudo npm install -g yarn

sudo python3 -m pip config --global set global.break-system-packages true



sudo apt install python3-pip -y
sudo pip3 install frappe-bench

bench init --frappe-branch version-15 frappe-bench

cd frappe-bench/

chmod -R o+rx /home/shaibal/

bench new-site rrksoft.local

  redis-server --port 11000 --daemonize yes --bind 127.0.0.1
    redis-server --port 12000 --daemonize yes --bind 127.0.0.1
    redis-server --port 13000 --daemonize yes --bind 127.0.0.1


  bench get-app --branch version-15 erpnext && \
bench --site rrksoft.local install-app erpnext
bench setup production shaibal


bench --site "$site_name" scheduler enable && \
bench --site "$site_name" scheduler resume

bench setup socketio
            yes | bench setup supervisor
            bench setup redis
            sudo supervisorctl reload

sudo systemctl restart redis-server

sudo supervisorctl restart all




sudo bench setup prp

bench get-app payments



bench get-app hrms


bench get-app crm
